(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{157:function(e,t,c){},253:function(e,t,c){"use strict";c.r(t);var a,r=c(0),n=c.n(r),s=c(25),i=c.n(s),o=(c(157),c(22)),l=c(19),u=c(72),d=c(41),j=c(257),O=c(149),b=c(260),p=c(6),h=function(e){var t=e.id,c=e.title,a=e.image,r=e.price,n=e.isLoading,s=Object(o.g)();return Object(p.jsx)(b.a,{loading:n,children:Object(p.jsx)(u.a,{className:"card-item",children:Object(p.jsx)(d.a,{span:4,children:Object(p.jsxs)(j.a,{className:"card",title:c,hoverable:!0,children:[Object(p.jsx)("img",{className:"card-image",src:a,alt:a}),Object(p.jsxs)("p",{children:["\u0426\u0435\u043d\u0430: ",r,"$"]}),Object(p.jsx)(O.a,{className:"card-button",onClick:function(){return s.push(R.PRODUCT+"/"+t)},children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438"})]})})})})},m=c(50),f=c(65),x=c(45),E=c.n(x),g=c(71);!function(e){e.SET_AUTH="SET_AUTH",e.SET_ERROR="SET_ERROR",e.SET_USER="SET_USER",e.SET_IS_LOADING="SET_IS_LOADING"}(a||(a={}));var T,S=c(142),v=c.n(S).a.create({baseURL:"https://fakestoreapi.com"}),y={setIsAuth:function(e){return{type:a.SET_AUTH,payload:e}},setError:function(e){return{type:a.SET_ERROR,payload:e}},setIsLoading:function(e){return{type:a.SET_IS_LOADING,payload:e}},setUser:function(e){return{type:a.SET_USER,payload:e}},login:function(e,t){return function(){var c=Object(g.a)(E.a.mark((function c(a){var r,n;return E.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,a(y.setIsLoading(!0)),c.next=4,v.get("/users");case 4:return r=c.sent,console.log(r.data),c.next=8,r.data.find((function(c){return c.username===e&&c.password===t}));case 8:(n=c.sent)?(localStorage.setItem("auth","true"),localStorage.setItem("firstname",n.name.firstname),a(y.setIsAuth(!0)),a(y.setUser(n))):a(y.setError("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043d\u0430\u0431\u0440\u0430\u043d \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!")),a(y.setIsLoading(!1)),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),a(y.setError("Error"));case 16:case"end":return c.stop()}}),c,null,[[0,13]])})));return function(e){return c.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(g.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("auth"),localStorage.removeItem("firstname"),t(y.setUser({})),t(y.setIsAuth(!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};!function(e){e.SET_IS_LOADING="SET_IS_LOADING",e.SET_ERROR="SET_ERROR",e.SET_PRODUCT="SET_PRODUCT",e.SET_SELECTED_PRODUCT="SET_SELECTED_PRODUCT"}(T||(T={}));var _,I={setError:function(e){return{type:T.SET_ERROR,payload:e}},setIsLoading:function(e){return{type:T.SET_IS_LOADING,payload:e}},setProduct:function(e){return{type:T.SET_PRODUCT,payload:e}},setSelectedProduct:function(e){return{type:T.SET_SELECTED_PRODUCT,payload:e}},fetchAllProduct:function(){return function(){var e=Object(g.a)(E.a.mark((function e(t){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(I.setIsLoading(!0)),e.next=4,v.get("/products");case 4:c=e.sent,t(I.setProduct(c.data)),t(I.setIsLoading(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(I.setError("\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},fetchProduct:function(e){return function(){var t=Object(g.a)(E.a.mark((function t(c){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(I.setIsLoading(!0)),t.next=4,v.get("/products/"+e);case 4:a=t.sent,c(I.setSelectedProduct(a.data)),c(I.setIsLoading(!1)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),c(I.setError("\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!"));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}};!function(e){e.SET_CART_ITEM="SET_CART_ITEM",e.REMOVE_CART_ITEM="REMOVE_CART_ITEM"}(_||(_={}));var R,C={setCart:function(e){return{type:_.SET_CART_ITEM,payload:e}},removeCart:function(e){return{type:_.REMOVE_CART_ITEM,payload:e}}},N=Object(l.a)(Object(l.a)(Object(l.a)({},y),I),C),A=function(){var e=Object(f.b)();return Object(m.bindActionCreators)(N,e)},L=f.c,D=function(){var e=A().fetchAllProduct,t=L((function(e){return e.products})),c=t.products,a=t.isLoading;return Object(r.useEffect)((function(){e()}),[]),Object(p.jsx)("div",{className:"card-wrapper",children:c.map((function(e){return Object(p.jsx)(h,Object(l.a)(Object(l.a)({},e),{},{isLoading:a}),e.id)}))})},U=c(116),P=c(148),w=c(258),M=c(259),k=function(){var e=A(),t=e.login,c=e.setError,a=Object(r.useState)(""),n=Object(U.a)(a,2),s=n[0],i=n[1],o=Object(r.useState)(""),l=Object(U.a)(o,2),d=l[0],b=l[1],h=L((function(e){return e.users})),m=h.isLoading,f=h.error;return Object(r.useEffect)((function(){f&&P.a.open({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0445\u043e\u0434\u0430",description:f}),c("")}),[f]),Object(p.jsx)(u.a,{className:"wrapper",justify:"center",align:"middle",children:Object(p.jsx)(j.a,{className:"card-width",title:"\u0412\u0445\u043e\u0434",bordered:!1,children:Object(p.jsxs)(w.a,{onFinish:function(){t(s,d)},children:[Object(p.jsx)(w.a.Item,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",children:Object(p.jsx)(M.a,{value:s,onChange:function(e){return i(e.target.value)},name:"username",placeholder:"login"})}),Object(p.jsx)(w.a.Item,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",children:Object(p.jsx)(M.a,{value:d,onChange:function(e){return b(e.target.value)},name:"password",placeholder:"qwerty123"})}),Object(p.jsx)(w.a.Item,{children:Object(p.jsx)(O.a,{type:"primary",htmlType:"submit",loading:m,children:"\u0412\u0445\u043e\u0434"})})]})})})},H=c(103),G=c(263),J=function(e){var t=e.id,c=e.image,a=e.title,r=e.price,n=A().removeCart;return Object(p.jsxs)("div",{className:"cart-content",children:[Object(p.jsxs)(u.a,{style:{flexBasis:"55%"},children:[Object(p.jsx)("img",{className:"cart-img",src:c,alt:c,width:60}),Object(p.jsxs)("div",{className:"cart-text",children:[a,", ",Object(p.jsxs)("span",{className:"cart-price",children:[r,"$"]})]})]}),Object(p.jsx)(u.a,{children:Object(p.jsx)(G.a,{className:"close-icon cart-cancel",onClick:function(){return n(t)}})})]})},V=function(){var e=Object(o.g)(),t=L((function(e){return e.cart})).cart;return Object(p.jsxs)("div",{className:"cart",children:[Object(p.jsxs)("div",{className:"cart-header",children:[Object(p.jsx)("div",{className:"cart-title",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(p.jsx)(H.a,{className:"close-icon",onClick:function(){return e.push(R.HOME)}})]}),Object(p.jsx)("div",{className:"cart-body",children:t.length?t.map((function(e){return Object(p.jsx)(J,Object(l.a)({},e),e.id)})):Object(p.jsx)("div",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"})}),Object(p.jsxs)("div",{className:"cart-footer",children:[Object(p.jsx)("div",{className:"total",children:Object(p.jsxs)("b",{children:["\u0412\u0441\u0435\u0433\u043e: ",t.reduce((function(e,t){return e+t.price}),0),"$"]})}),Object(p.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Submit"})]})]})},$=c(255),z=c(261),B=c(54),F=function(){var e=Object(o.h)(),t=Object(o.g)(),c=A(),a=c.fetchProduct,n=c.setError,s=c.setCart,i=L((function(e){return e.products})),j=i.selectedProduct,b=i.isLoading,h=i.error,m=L((function(e){return e.users})).isAuth,f=Object(p.jsx)(B.a,{style:{fontSize:234},spin:!0});return Object(r.useEffect)((function(){a(e.id),h&&P.a.open({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b",description:h}),n("")}),[h]),Object(p.jsxs)("div",{children:[b?Object(p.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate: (-50%,-50%)"},children:Object(p.jsx)($.a,{indicator:f})}):Object(p.jsxs)(u.a,{className:"flex-container",children:[Object(p.jsx)(d.a,{span:4,children:Object(p.jsx)("img",{className:"card-image",src:j.image,alt:j.image})}),Object(p.jsx)(d.a,{span:12,children:Object(p.jsxs)(z.b,{title:j.title,bordered:!0,layout:"vertical",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},children:[Object(p.jsx)(z.b.Item,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",children:j.category}),Object(p.jsx)(z.b.Item,{label:"\u0426\u0435\u043d\u0430,$",children:j.price}),Object(p.jsx)(z.b.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",children:j.description})]})})]}),Object(p.jsx)(u.a,{children:Object(p.jsx)(O.a,{onClick:function(){m?(s([Object(l.a)({},j)]),t.push(R.CART)):P.a.open({message:"\u041f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e",description:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})})]})};!function(e){e.LOGIN="/login",e.HOME="/",e.CART="/cart",e.PRODUCT="/product"}(R||(R={}));var q=[{path:R.HOME,component:D,exact:!0},{path:R.LOGIN,component:k,exact:!0},{path:R.PRODUCT+"/:id",component:F,exact:!0}],W=[{path:R.HOME,component:D,exact:!0},{path:R.CART,component:V,exact:!0},{path:R.PRODUCT+"/:id",component:F,exact:!0}],K=function(){var e=L((function(e){return e.users})).isAuth;return Object(p.jsxs)(o.d,{children:[e?W.map((function(e){return Object(p.jsx)(o.b,{path:e.path,component:e.component,exact:e.exact},e.path)})):q.map((function(e){return Object(p.jsx)(o.b,{path:e.path,component:e.component,exact:e.exact},e.path)})),Object(p.jsx)(o.a,{to:R.HOME})]})},Q=c(256),X=c(262),Y=function(){var e,t=A().logout,c=L((function(e){return e.users})),a=c.isAuth,r=c.user,n=Object(o.g)();return Object(p.jsx)(Q.a.Header,{className:"header",children:Object(p.jsxs)(u.a,{children:[Object(p.jsx)(d.a,{span:12,children:Object(p.jsx)(X.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(p.jsx)(X.a.Item,{onClick:function(){return n.push(R.HOME)},children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},1)})}),Object(p.jsx)(d.a,{className:"flex-end",span:12,children:Object(p.jsxs)(u.a,{children:[Object(p.jsx)(d.a,{span:20,children:Object(p.jsx)(u.a,{justify:"end",children:a&&Object(p.jsx)("div",{className:"username",children:null===(e=r.name)||void 0===e?void 0:e.firstname})})}),Object(p.jsx)(d.a,{span:4,children:Object(p.jsxs)(X.a,{theme:"dark",mode:"horizontal",selectable:!1,children:[Object(p.jsx)(X.a.Item,{onClick:function(){a?(t(),n.push(R.HOME)):n.push(R.LOGIN)},children:a?"\u0412\u044b\u0439\u0442\u0438":"\u0412\u043e\u0439\u0442\u0438"},1),Object(p.jsx)(X.a.Item,{onClick:function(){return n.push(R.CART)},children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"},2)]})})]})})]})})},Z=function(){var e=A(),t=e.setIsAuth,c=e.setUser,a=e.setCart;return Object(r.useEffect)((function(){localStorage.getItem("auth")&&(c({name:{firstname:localStorage.getItem("firstname")}}),t(!0),a(JSON.parse(localStorage.getItem("cart"))||[]))}),[t,c]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(Q.a,{className:"layout",children:[Object(p.jsx)(Y,{}),Object(p.jsx)(Q.a.Content,{className:"content",children:Object(p.jsx)("div",{className:"site-layout-content",children:Object(p.jsx)(K,{})})})]})})},ee=c(53),te=c(146),ce=c(147),ae={isAuth:!1,error:"",isLoading:!1,user:{}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.SET_AUTH:return Object(l.a)(Object(l.a)({},e),{},{isAuth:t.payload,isLoading:!1});case a.SET_ERROR:return Object(l.a)(Object(l.a)({},e),{},{error:t.payload,isLoading:!1});case a.SET_USER:return Object(l.a)(Object(l.a)({},e),{},{user:t.payload});case a.SET_IS_LOADING:return Object(l.a)(Object(l.a)({},e),{},{isLoading:t.payload});default:return e}},ne={products:[],isLoading:!1,error:"",selectedProduct:{}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.SET_IS_LOADING:return Object(l.a)(Object(l.a)({},e),{},{isLoading:t.payload});case T.SET_ERROR:return Object(l.a)(Object(l.a)({},e),{},{error:t.payload,isLoading:!1});case T.SET_PRODUCT:return Object(l.a)(Object(l.a)({},e),{},{products:t.payload});case T.SET_SELECTED_PRODUCT:return Object(l.a)(Object(l.a)({},e),{},{selectedProduct:t.payload});default:return e}},ie=c(80),oe={cart:[]},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _.SET_CART_ITEM:var c=e.cart.find((function(e){return e.title===t.payload[0].title}));return c?e:(localStorage.setItem("cart",JSON.stringify([].concat(Object(ie.a)(e.cart),Object(ie.a)(t.payload)))),Object(l.a)(Object(l.a)({},e),{},{cart:[].concat(Object(ie.a)(e.cart),Object(ie.a)(t.payload))}));case _.REMOVE_CART_ITEM:var a=JSON.parse(localStorage.getItem("cart"))||[],r=a.filter((function(e){return e.id!==t.payload}));return localStorage.setItem("cart",JSON.stringify(r)),Object(l.a)(Object(l.a)({},e),{},{cart:r});default:return e}},ue=Object(m.combineReducers)({users:re,products:se,cart:le}),de=Object(m.createStore)(ue,Object(te.composeWithDevTools)(Object(m.applyMiddleware)(ce.a)));i.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(f.a,{store:de,children:Object(p.jsx)(ee.a,{children:Object(p.jsx)(Z,{})})})}),document.getElementById("root"))}},[[253,1,2]]]);
//# sourceMappingURL=main.aae69be1.chunk.js.map