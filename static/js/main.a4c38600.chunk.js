(this["webpackJsonpe-commerce"]=this["webpackJsonpe-commerce"]||[]).push([[0],{152:function(e,t,c){},249:function(e,t,c){"use strict";c.r(t);var r,a=c(0),n=c.n(a),s=c(25),i=c.n(s),o=(c(152),c(22)),u=c(15),l=c(69),d=c(39),j=c(252),O=c(144),b=c(256),p=c(6),h=function(e){var t=e.id,c=e.title,r=e.image,a=e.price,n=e.isLoading,s=Object(o.g)();return Object(p.jsx)(b.a,{loading:n,children:Object(p.jsx)(l.a,{className:"card-item",children:Object(p.jsx)(d.a,{span:4,children:Object(p.jsxs)(j.a,{className:"card",title:c,hoverable:!0,children:[Object(p.jsx)("img",{className:"card-image",src:r,alt:r}),Object(p.jsxs)("p",{children:["\u0426\u0435\u043d\u0430: ",a,"$"]}),Object(p.jsx)(O.a,{className:"card-button",onClick:function(){return s.push(I.PRODUCT+"/"+t)},children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438"})]})})})})},f=c(48),m=c(63),x=c(43),E=c.n(x),g=c(68);!function(e){e.SET_AUTH="SET_AUTH",e.SET_ERROR="SET_ERROR",e.SET_USER="SET_USER",e.SET_IS_LOADING="SET_IS_LOADING"}(r||(r={}));var T,S=c(137),v=c.n(S).a.create({baseURL:"https://fakestoreapi.com"}),_={setIsAuth:function(e){return{type:r.SET_AUTH,payload:e}},setError:function(e){return{type:r.SET_ERROR,payload:e}},setIsLoading:function(e){return{type:r.SET_IS_LOADING,payload:e}},setUser:function(e){return{type:r.SET_USER,payload:e}},login:function(e,t){return function(){var c=Object(g.a)(E.a.mark((function c(r){var a,n;return E.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,r(_.setIsLoading(!0)),c.next=4,v.get("/users");case 4:return a=c.sent,console.log(a.data),c.next=8,a.data.find((function(c){return c.username===e&&c.password===t}));case 8:(n=c.sent)?(localStorage.setItem("auth","true"),localStorage.setItem("firstname",n.name.firstname),r(_.setIsAuth(!0)),r(_.setUser(n))):r(_.setError("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043d\u0430\u0431\u0440\u0430\u043d \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!")),r(_.setIsLoading(!1)),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),r(_.setError("Error"));case 16:case"end":return c.stop()}}),c,null,[[0,13]])})));return function(e){return c.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(g.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("auth"),localStorage.removeItem("firstname"),t(_.setUser({})),t(_.setIsAuth(!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};!function(e){e.SET_IS_LOADING="SET_IS_LOADING",e.SET_ERROR="SET_ERROR",e.SET_PRODUCT="SET_PRODUCT",e.SET_SELECTED_PRODUCT="SET_SELECTED_PRODUCT"}(T||(T={}));var y,R={setError:function(e){return{type:T.SET_ERROR,payload:e}},setIsLoading:function(e){return{type:T.SET_IS_LOADING,payload:e}},setProduct:function(e){return{type:T.SET_PRODUCT,payload:e}},setSelectedProduct:function(e){return{type:T.SET_SELECTED_PRODUCT,payload:e}},fetchAllProduct:function(){return function(){var e=Object(g.a)(E.a.mark((function e(t){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(R.setIsLoading(!0)),e.next=4,v.get("/products");case 4:c=e.sent,t(R.setProduct(c.data)),t(R.setIsLoading(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(R.setError("\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},fetchProduct:function(e){return function(){var t=Object(g.a)(E.a.mark((function t(c){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(R.setIsLoading(!0)),t.next=4,v.get("/products/"+e);case 4:r=t.sent,c(R.setSelectedProduct(r.data)),c(R.setIsLoading(!1)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),c(R.setError("\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443!"));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}};!function(e){e.SET_CART_ITEM="SET_CART_ITEM",e.REMOVE_CART_ITEM="REMOVE_CART_ITEM"}(y||(y={}));var I,C={setCart:function(e){return{type:y.SET_CART_ITEM,payload:e}},removeCart:function(e){return{type:y.REMOVE_CART_ITEM,payload:e}}},N=Object(u.a)(Object(u.a)(Object(u.a)({},_),R),C),A=function(){var e=Object(m.b)();return Object(f.bindActionCreators)(N,e)},L=m.c,D=function(){var e=A().fetchAllProduct,t=L((function(e){return e.products})),c=t.products,r=t.isLoading;return Object(a.useEffect)((function(){e()}),[]),Object(p.jsx)("div",{className:"card-wrapper",children:c.map((function(e){return Object(p.jsx)(h,Object(u.a)(Object(u.a)({},e),{},{isLoading:r}),e.id)}))})},U=c(111),P=c(143),w=c(253),M=c(254),k=function(){var e=A(),t=e.login,c=e.setError,r=Object(a.useState)(""),n=Object(U.a)(r,2),s=n[0],i=n[1],o=Object(a.useState)(""),u=Object(U.a)(o,2),d=u[0],b=u[1],h=L((function(e){return e.users})),f=h.isLoading,m=h.error;return Object(a.useEffect)((function(){m&&P.a.open({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u0445\u043e\u0434\u0430",description:m}),c("")}),[m]),Object(p.jsx)(l.a,{className:"wrapper",justify:"center",align:"middle",children:Object(p.jsx)(j.a,{className:"card-width",title:"\u0412\u0445\u043e\u0434",bordered:!1,children:Object(p.jsxs)(w.a,{onFinish:function(){t(s,d)},children:[Object(p.jsx)(w.a.Item,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",children:Object(p.jsx)(M.a,{value:s,onChange:function(e){return i(e.target.value)},name:"username",placeholder:"login"})}),Object(p.jsx)(w.a.Item,{label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",children:Object(p.jsx)(M.a,{value:d,onChange:function(e){return b(e.target.value)},name:"password",placeholder:"qwerty123"})}),Object(p.jsx)(w.a.Item,{children:Object(p.jsx)(O.a,{type:"primary",htmlType:"submit",loading:f,children:"\u0412\u0445\u043e\u0434"})})]})})})},G=c(97),H=c(258),J=function(e){var t=e.id,c=e.image,r=e.title,a=e.price,n=A().removeCart;return Object(p.jsxs)("div",{className:"cart-content",children:[Object(p.jsxs)(l.a,{style:{flexBasis:"55%"},children:[Object(p.jsx)("img",{className:"cart-img",src:c,alt:c,width:60}),Object(p.jsxs)("div",{className:"cart-text",children:[r,", ",Object(p.jsxs)("span",{className:"cart-price",children:[a,"$"]})]})]}),Object(p.jsx)(l.a,{children:Object(p.jsx)(H.a,{className:"close-icon cart-cancel",onClick:function(){return n(t)}})})]})},V=function(){var e=Object(o.g)(),t=L((function(e){return e.cart})).cart;return Object(p.jsxs)("div",{className:"cart",children:[Object(p.jsxs)("div",{className:"cart-header",children:[Object(p.jsx)("div",{className:"cart-title",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(p.jsx)(G.a,{className:"close-icon",onClick:function(){return e.push(I.HOME)}})]}),Object(p.jsx)("div",{className:"cart-body",children:t.length?t.map((function(e){return Object(p.jsx)(J,Object(u.a)({},e),e.id)})):Object(p.jsx)("div",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"})}),Object(p.jsxs)("div",{className:"cart-footer",children:[Object(p.jsx)("div",{className:"total",children:Object(p.jsxs)("b",{children:["\u0412\u0441\u0435\u0433\u043e: ",t.reduce((function(e,t){return e+t.price}),0),"$"]})}),Object(p.jsx)(O.a,{type:"primary",htmlType:"submit",children:"Submit"})]})]})},$=c(251),B=c(257),F=c(52),q=function(){var e=Object(o.h)(),t=Object(o.g)(),c=A(),r=c.fetchProduct,n=c.setError,s=c.setCart,i=L((function(e){return e.products})),j=i.selectedProduct,b=i.isLoading,h=i.error,f=L((function(e){return e.users})).isAuth,m=Object(p.jsx)(F.a,{style:{fontSize:234},spin:!0});return Object(a.useEffect)((function(){r(e.id),h&&P.a.open({message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b",description:h}),n("")}),[h]),Object(p.jsxs)("div",{children:[b?Object(p.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate: (-50%,-50%)"},children:Object(p.jsx)($.a,{indicator:m})}):Object(p.jsxs)(l.a,{className:"flex-container",children:[Object(p.jsx)(d.a,{span:4,children:Object(p.jsx)("img",{className:"card-image",src:j.image,alt:j.image})}),Object(p.jsx)(d.a,{span:12,children:Object(p.jsxs)(B.b,{title:j.title,bordered:!0,layout:"vertical",column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1},children:[Object(p.jsx)(B.b.Item,{label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",children:j.category}),Object(p.jsx)(B.b.Item,{label:"\u0426\u0435\u043d\u0430,$",children:j.price}),Object(p.jsx)(B.b.Item,{label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",children:j.description})]})})]}),Object(p.jsx)(l.a,{children:Object(p.jsx)(O.a,{onClick:function(){f?(s([Object(u.a)({},j)]),t.push(I.CART)):P.a.open({message:"\u041f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e",description:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})})]})};!function(e){e.LOGIN="/login",e.HOME="/",e.CART="/cart",e.PRODUCT="/product"}(I||(I={}));var z=[{path:I.HOME,component:D,exact:!0},{path:I.LOGIN,component:k,exact:!0},{path:I.PRODUCT+"/:id",component:q,exact:!0}],W=[{path:I.HOME,component:D,exact:!0},{path:I.CART,component:V,exact:!0},{path:I.PRODUCT+"/:id",component:q,exact:!0}],K=function(){var e=L((function(e){return e.users})).isAuth;return Object(p.jsxs)(o.d,{children:[e?W.map((function(e){return Object(p.jsx)(o.b,{path:e.path,component:e.component,exact:e.exact},e.path)})):z.map((function(e){return Object(p.jsx)(o.b,{path:e.path,component:e.component,exact:e.exact},e.path)})),Object(p.jsx)(o.a,{to:I.HOME})]})},Q=function(){var e,t=A().logout,c=L((function(e){return e.users})),r=c.isAuth,a=c.user,n=Object(o.g)();return Object(p.jsx)("header",{className:"header",children:Object(p.jsxs)("nav",{className:"nav",children:[Object(p.jsx)("div",{onClick:function(){return n.push(I.HOME)},children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"}),Object(p.jsxs)("ul",{className:"list",children:[r&&Object(p.jsx)("div",{className:"username",children:null===(e=a.name)||void 0===e?void 0:e.firstname}),Object(p.jsx)("li",{onClick:function(){r?(t(),n.push(I.HOME)):n.push(I.LOGIN)},children:r?"\u0412\u044b\u0439\u0442\u0438":"\u0412\u043e\u0439\u0442\u0438"}),Object(p.jsx)("li",{onClick:function(){return n.push(I.CART)},children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"})]})]})})},X=c(255),Y=function(){var e=A(),t=e.setIsAuth,c=e.setUser,r=e.setCart;return Object(a.useEffect)((function(){localStorage.getItem("auth")&&(c({name:{firstname:localStorage.getItem("firstname")}}),t(!0),r(JSON.parse(localStorage.getItem("cart"))||[]))}),[t,c]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(X.a,{className:"layout",children:[Object(p.jsx)(Q,{}),Object(p.jsx)(X.a.Content,{className:"content",children:Object(p.jsx)("div",{className:"site-layout-content",children:Object(p.jsx)(K,{})})})]})})},Z=c(51),ee=c(141),te=c(142),ce={isAuth:!1,error:"",isLoading:!1,user:{}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_AUTH:return Object(u.a)(Object(u.a)({},e),{},{isAuth:t.payload,isLoading:!1});case r.SET_ERROR:return Object(u.a)(Object(u.a)({},e),{},{error:t.payload,isLoading:!1});case r.SET_USER:return Object(u.a)(Object(u.a)({},e),{},{user:t.payload});case r.SET_IS_LOADING:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload});default:return e}},ae={products:[],isLoading:!1,error:"",selectedProduct:{}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.SET_IS_LOADING:return Object(u.a)(Object(u.a)({},e),{},{isLoading:t.payload});case T.SET_ERROR:return Object(u.a)(Object(u.a)({},e),{},{error:t.payload,isLoading:!1});case T.SET_PRODUCT:return Object(u.a)(Object(u.a)({},e),{},{products:t.payload});case T.SET_SELECTED_PRODUCT:return Object(u.a)(Object(u.a)({},e),{},{selectedProduct:t.payload});default:return e}},se=c(77),ie={cart:[]},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.SET_CART_ITEM:var c=e.cart.find((function(e){return e.title===t.payload[0].title}));return c?e:(localStorage.setItem("cart",JSON.stringify([].concat(Object(se.a)(e.cart),Object(se.a)(t.payload)))),Object(u.a)(Object(u.a)({},e),{},{cart:[].concat(Object(se.a)(e.cart),Object(se.a)(t.payload))}));case y.REMOVE_CART_ITEM:var r=JSON.parse(localStorage.getItem("cart"))||[],a=r.filter((function(e){return e.id!==t.payload}));return localStorage.setItem("cart",JSON.stringify(a)),Object(u.a)(Object(u.a)({},e),{},{cart:a});default:return e}},ue=Object(f.combineReducers)({users:re,products:ne,cart:oe}),le=Object(f.createStore)(ue,Object(ee.composeWithDevTools)(Object(f.applyMiddleware)(te.a)));c(248);i.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(m.a,{store:le,children:Object(p.jsx)(Z.a,{children:Object(p.jsx)(Y,{})})})}),document.getElementById("root"))}},[[249,1,2]]]);
//# sourceMappingURL=main.a4c38600.chunk.js.map